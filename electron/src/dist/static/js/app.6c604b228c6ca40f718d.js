webpackJsonp([1],{"11TF":function(t,s){},"5mPX":function(t,s){},"H/47":function(t,s){},H8eb:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("xd7I"),n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var a=e("C7Lr")({name:"App"},n,!1,function(t){e("ULO+")},"data-v-56cf5021",null).exports,o=e("qqHy"),r=e.n(o),c=e("g1sz"),l=e.n(c),u=e("+v8O"),p=e.n(u),d=e("K6Kj"),m=e.n(d),h=e("7LQH"),v=e("HzJ8"),_=e.n(v),g=e("3cXf"),f=e.n(g),y={name:"login",data:function(){return{}},methods:{zhengze:function(){null==this.$(".tel").val().match(/^[1][3548][0-9]{9}$/)?this.$(".teljing").css({display:"block"}):this.$(".teljing").css({display:"none"}),null==this.$(".zhanghao").val().match(/[0-9]{8}/)?this.$(".zhangjing").css({display:"block"}):this.$(".zhangjing").css({display:"none"})},Register:function(){var t=document.getElementById("account").value,s=document.getElementById("password").value,e=document.getElementById("nick_name").value,i=document.getElementById("tel").value,n=this,a=this.$(".tel").val().match(/^[1][3548][0-9]{9}$/),o=this.$(".zhanghao").val().match(/^[0-9]{8}$/);null==a&&this.$(".teljing").css({display:"block"}),null==o&&this.$(".zhangjing").css({display:"block"}),null!=a&&0!==s.length&&0!==e.length&&null!=o?$.ajax({url:"http://129.28.101.21:5000/api/register",type:"POST",data:f()({account:t,password:s,nick_name:e,tel:i}),xhrfields:{withCredentials:!0},dataType:"json",contentType:"application/json;charset=UTF-8 ",success:function(t){if(console.log(t),t.status){if("Data insertion success"===t.msg)n.$router.push({path:"/"});else if("Account had been exist"===t.msg){window.alert("该账号已注册，请重新注册"),console.log(1);var s=document.getElementsByTagName("input"),e=!0,i=!1,a=void 0;try{for(var o,r=_()(s);!(e=(o=r.next()).done);e=!0){o.value.value=""}}catch(t){i=!0,a=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw a}}}}else t.status||alert("注册失败，请重新注册")},error:function(){console.log("注册失败！")}}):alert("请完善信息")}}},C={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"login"}},[e("div",{staticClass:"login"},[e("div",{staticClass:"container-login100"},[e("div",{staticClass:"wrap-login100"},[t._m(0),t._v(" "),e("form",{staticClass:"login100-form validate-form",attrs:{action:"/index"}},[t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("div",{staticClass:"wrap-input100 validate-input"},[e("input",{staticClass:"input100 tel inputer",attrs:{type:"text",id:"tel",name:"tel",placeholder:"电话号码"},on:{change:function(s){return t.zhengze()}}}),t._v(" "),e("img",{staticClass:"tubiao",attrs:{src:"static/img/icon/dianhua.png",alt:""}}),t._v(" "),e("span",{staticClass:"jinggao teljing"},[t._v("电话号码格式不对哦！")])]),t._v(" "),e("div",{staticClass:"container-login100-form-btn"},[e("button",{staticClass:"login100-form-btn",attrs:{type:"button",id:"btn_register"},on:{click:function(s){return t.Register()}}},[t._v("\n\t\t\t\t\t\t注册\n\t\t\t\t\t")])]),t._v(" "),e("span",{staticClass:"go"},[e("router-link",{attrs:{to:"/"}},[t._v("已有账号，去登录")])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"login100-pic js-tilt",attrs:{"data-tilt":""}},[s("img",{attrs:{src:"static/img/img-01.png",alt:"IMG"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"wrap-input100 validate-input"},[s("input",{staticClass:"input100 inputer zhanghao",attrs:{type:"text",id:"account",name:"account",placeholder:"账号"}}),this._v(" "),s("img",{staticClass:"tubiao",attrs:{src:"static/img/icon/zhanghao.png",alt:""}}),this._v(" "),s("span",{staticClass:"jinggao zhangjing"},[this._v("账号必须是8位！")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"wrap-input100 validate-input"},[s("input",{staticClass:"input100",attrs:{type:"text",id:"nick_name",name:"nick_name",placeholder:"昵称"}}),this._v(" "),s("span",{staticClass:"focus-input100"}),this._v(" "),s("span",{staticClass:"symbol-input100"},[s("i",{staticClass:"fa fa-address-book",attrs:{"aria-hidden":"true"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"wrap-input100 validate-input"},[s("input",{staticClass:"input100",attrs:{type:"password",id:"password",name:"pass",placeholder:"密码"}}),this._v(" "),s("span",{staticClass:"focus-input100"}),this._v(" "),s("span",{staticClass:"symbol-input100"},[s("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}})])])}]};var b=e("C7Lr")(y,C,!1,function(t){e("Xm6B")},"data-v-ab92bf86",null).exports,x={name:"loading",mounted:function(){this.$("#loading").height(window.innerHeight)},data:function(){return{msg:"Welcome to Your Vue.js App",spinShow:!0}}},k={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"loading"}},[e("div",{staticClass:"demo-spin-article"},[t.spinShow?e("Spin",{attrs:{size:"large",fix:""}}):t._e()],1),t._v(" "),e("br"),t._v("\n   切换显示状态："),e("i-switch",{on:{"on-change":function(s){t.spinShow=!t.spinShow}}})],1)},staticRenderFns:[]};var w=e("C7Lr")(x,k,!1,function(t){e("R5dQ")},"data-v-c33f1128",null).exports,j=new i.default,E={name:"app",components:{loading:w},mounted:function(){var t=this;j.$on("user",function(s){console.log(s),t.msg=s,t.$nextTick(function(){})});this.$.ajax({url:"http://129.28.101.21:5000/api/rank/orderBy?type=max_streak_num",type:"GET",xhrFields:{withCredentials:!0},async:!0,crossDomain:!0,datatype:"json",contentType:"application/json;charset=UTF-8 ",success:function(s){console.log(s.data),t.liansheng=s.data,console.log(t.pipei)}});this.$.ajax({url:"http://129.28.101.21:5000/api/rank/orderBy?type=win_rate",type:"GET",xhrFields:{withCredentials:!0},async:!0,crossDomain:!0,datatype:"json",contentType:"application/json;charset=UTF-8 ",success:function(s){console.log(s.data),t.pipei=s.data,console.log(t.liansheng)}}),this.$(".s-block").height(window.innerHeight)},data:function(){return{msg:{},pipei:[],liansheng:[],sheng:[{name:"胜率排行榜",child:[{touxiang:"public/img/person_tou.jpg",name:"小新"},{touxiang:"public/img/person_tou.jpg",name:"小新"},{touxiang:"public/img/person_tou.jpg",name:"小新"},{touxiang:"public/img/person_tou.jpg",name:"小新"}]},{name:"连胜排行榜",child:[{touxiang:"public/img/person_tou.jpg",name:"小明"},{touxiang:"public/img/person_tou.jpg",name:"小明"},{touxiang:"public/img/person_tou.jpg",name:"小明"}]}]}},methods:{emit:function(){var t=this;setTimeout(function(){j.$emit("usermsg",t.msg)},3)},xuanxiangka:function(t){this.$(".bottom>ul").eq(t+1).show().siblings(".bottom>ul:not(.title)").hide(),t+1==1?this.$(".title>li").eq(3).children().html("胜率"):t+1==2&&this.$(".title>li").eq(3).children().html("最大连胜次数")},back:function(){var t=this;this.$.ajax({url:"http://129.28.101.21:5000/api/out",type:"GET",xhrFields:{withCredentials:!0},crossDomain:!0,dataType:"json",success:function(s){alert("已退出登录"),!1===s.is_login&&t.$router.push({path:"/"})}})}}},S={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"s-block"},[e("div",{staticClass:"top-block"},[e("div",{staticClass:"kong-block"}),t._v(" "),e("div",{staticClass:"s-title"},[t._v("灾害常识答题平台")]),t._v(" "),e("div",{staticClass:"s-touxiang"},[e("div",{staticClass:"caidan"},[t._v("菜单\n                   "),e("div",{staticClass:"xiala"},[e("router-link",{attrs:{to:"/geren"}},[e("span",{on:{click:function(s){return t.emit()}}},[t._v("个人主页")])]),t._v(" "),e("span",{staticClass:"tuichu",on:{click:function(s){return t.back()}}},[t._v("退出登录")])],1)]),t._v(" "),e("img",{attrs:{src:"http://"+this.msg.avatarUrl,alt:"加载失败"}}),t._v(" "),e("span",[t._v(t._s(this.msg.nick_name))])])]),t._v(" "),e("div",{staticClass:"bottom-block"},[e("div",{staticClass:"left-block"},[e("router-link",{attrs:{to:"/game"}},[e("button",{staticClass:"pipei",on:{click:function(s){return t.emit()}}},[t._v("开始匹配")])]),t._v(" "),e("audio",{staticClass:"mp3",attrs:{src:"static/mp3/6.mp3"}})],1),t._v(" "),e("div",{staticClass:"right-block"},[e("div",{staticClass:"paihang-block"},[e("div",{staticClass:"top"},t._l(t.sheng,function(s,i){return e("span",{key:i,on:{click:function(s){return t.xuanxiangka(i)}}},[t._v(t._s(s.name))])}),0),t._v(" "),e("div",{staticClass:"bottom"},[t._m(0),t._v(" "),e("ul",{staticClass:"pipei"},t._l(this.pipei,function(s,i){return e("li",{key:i},[i<3?e("img",{staticClass:"huangguan",attrs:{src:0==i?"static/img/icon/huangguan.png":1==i?"static/img/icon/huangguan2.png":2==i?"static/img/icon/huangguan3.png":"",alt:""}}):t._e(),t._v(" "),e("div",[e("div",[e("img",{attrs:{src:"http://"+s.avatarUrl,alt:""}})]),t._v(" "),e("span",[t._v(t._s(s.user_id))]),t._v(" "),e("span",[t._v(t._s(s.nick_name))]),t._v(" "),e("span",[t._v(t._s(s.win_rate))])])])}),0),t._v(" "),e("ul",{staticClass:"liansheng"},t._l(this.liansheng,function(s,i){return e("li",{key:i},[i<3?e("img",{staticClass:"huangguan",attrs:{src:0==i?"static/img/icon/huangguan.png":1==i?"static/img/icon/huangguan2.png":2==i?"static/img/icon/huangguan3.png":"",alt:""}}):t._e(),t._v(" "),e("div",[e("div",[e("img",{attrs:{src:"http://"+s.avatarUrl,alt:""}})]),t._v(" "),e("span",[t._v(t._s(s.user_id))]),t._v(" "),e("span",[t._v(t._s(s.nick_name))]),t._v(" "),e("span",[t._v(t._s(s.max_streak_num))])])])}),0)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"title"},[s("li",[s("span",[this._v("头像")])]),this._v(" "),s("li",[s("span",[this._v("账号")])]),this._v(" "),s("li",[s("span",[this._v("昵称")])]),this._v(" "),s("li",[s("span",[this._v("胜率")])])])}]};var T=e("C7Lr")(E,S,!1,function(t){e("yUHH")},"data-v-3f76b79e",null).exports,R={name:"geren",mounted:function(){var t=this;j.$on("usermsg",function(s){console.log(s),t.user=s,t.$nextTick(function(){t.user=s})}),this.$.ajax({url:"http://129.28.101.21:5000/api/user/viewPersonInfo",type:"get",xhrFields:{withCredentials:!0},async:!1,crossDomain:!0,datatype:"json",contentType:"application/json;charset=UTF-8 ",success:function(s){console.log(s.data),t.msg=s.data,console.log(this.msg)}}),t.draw()},data:function(){return{msg:{},user:{}}},methods:{emit:function(){var t=this;setTimeout(function(){j.$emit("user",t.user)},2)},draw:function(){var t="path://public/img/icon/jiuyuan.png",s="path://public/img/icon/dizhen.png",e="path://public/img/icon/yujing.png";this.$echarts.init(document.getElementById("main1")).setOption({tooltip:{trigger:"axis",axisPointer:{type:"none"},formatter:function(t){return t[0].name+": "+t[0].value}},xAxis:{data:["救援知识答题正确率","构造知识答题正确率","预测预警知识答题正确率"],axisTick:{show:!1},axisLine:{show:!1},axisLabel:{textStyle:{color:"#2580B3"}}},yAxis:{splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},color:["#7DE2FC"],series:[{name:"hill",type:"pictorialBar",barCategoryGap:"-130%",symbol:"path://M0,10 L10,10 C5.5,10 5.5,5 5,0 C4.5,5 4.5,10 0,10 z",itemStyle:{normal:{opacity:.5},emphasis:{opacity:1}},data:[parseFloat(this.msg.rescue_rate),parseFloat(this.msg.structure_rate),parseFloat(this.msg.predict_rate)],z:10},{name:"glyph",type:"pictorialBar",barGap:"-100%",symbolPosition:"end",symbolSize:50,symbolOffset:[0,"-120%"],data:[{value:parseFloat(this.msg.rescue_rate),symbol:t,symbolSize:[60,60]},{value:parseFloat(this.msg.structure_rate),symbol:e,symbolSize:[50,60]},{value:parseFloat(this.msg.predict_rate),symbol:s,symbolSize:[65,35]}]}]})}}},F={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"geren"}},[e("div",{staticClass:"gtitle-block"},[e("div",{staticClass:"top-left",on:{click:function(s){return t.emit()}}},[e("router-link",{attrs:{to:"/index"}},[e("img",{attrs:{src:"static/img/fanhui.png",alt:""}}),e("span",[t._v("首页")])])],1),t._v(" "),e("span",[t._v("个人信息")])]),t._v(" "),e("div",{staticClass:"usermsg"},[e("div",[e("img",{attrs:{src:"http://"+this.user.avatarUrl,alt:""}})]),t._v(" "),e("ul",[e("li",[e("span",[t._v("账号：")]),e("span",[t._v(t._s(this.msg.account))])]),t._v(" "),e("li",[e("span",[t._v("昵称：")]),e("span",[t._v(t._s(this.msg.nick_name))])]),t._v(" "),e("li",[e("span",[t._v("电话：")]),e("span",[t._v(t._s(this.msg.tel))])]),t._v(" "),e("li",[e("router-link",{attrs:{to:"/xiugai"}},[e("button",{on:{click:function(s){return t.emit()}}},[t._v("修改信息")])])],1)])]),t._v(" "),e("p",{staticClass:"bottom-title"},[t._v("比赛信息展示")]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"biaoge"},[e("table",{attrs:{border:"2"}},[t._m(1),t._v(" "),e("tr",[e("td",[t._v(t._s(this.msg.level_grade))]),t._v(" "),e("td",[t._v(t._s(this.msg.integral_score))]),t._v(" "),e("td",[t._v(t._s(this.msg.win_rate))]),t._v(" "),e("td",[t._v(t._s(this.msg.win_num))]),t._v(" "),e("td",[t._v(t._s(this.msg.max_streak_num))]),t._v(" "),e("td",[t._v(t._s(this.msg.contest_num))]),t._v(" "),e("td",[t._v(t._s(this.msg.average_score))]),t._v(" "),e("td",[t._v(t._s(this.msg.average_time))]),t._v(" "),e("td",[t._v(t._s(this.msg.correct_rate))])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tu-block"},[s("div",{attrs:{id:"main1"}})])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("th",[t._v("用户等级")]),t._v(" "),e("th",[t._v("用户积分")]),t._v(" "),e("th",[t._v("胜率")]),t._v(" "),e("th",[t._v("胜利次数")]),t._v(" "),e("th",[t._v("最大连胜次数")]),t._v(" "),e("th",[t._v("比赛次数")]),t._v(" "),e("th",[t._v("平均成绩")]),t._v(" "),e("th",[t._v("平均用时")]),t._v(" "),e("th",[t._v("平均总正确率")])])}]};var I=e("C7Lr")(R,F,!1,function(t){e("H8eb")},"data-v-6a31f92e",null).exports,z={mounted:function(){this.chartFn()},methods:{chartFn:function(){this.$echarts.init(document.getElementById("pieChart")).setOption({title:{text:"饼图",subtext:"练习专用",x:"center"},legend:{orient:"vertical",left:"left",data:["直接访问","邮件营销","联盟广告","视频广告","搜索引擎"]},series:[{name:"访问来源",type:"pie",radius:"60%",center:["50%","60%"],data:[{value:335,name:"直接访问"},{value:310,name:"邮件营销"},{value:234,name:"联盟广告"},{value:135,name:"视频广告"},{value:1548,name:"搜索引擎"}]}]})}}},N={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"box"},[s("div",{attrs:{id:"pieChart"}})])}]};var B=e("C7Lr")(z,N,!1,function(t){e("H/47")},"data-v-63e11054",null).exports,L={name:"xiugai",mounted:function(){this.$("#xiugai").height(window.innerHeight),console.log(window.innerHeight);var t=this;j.$on("user",function(s){console.log(s),t.user=s,t.$nextTick(function(){t.user=s})}),this.$.ajax({url:"http://129.28.101.21:5000/api/user/viewPersonInfo",type:"get",xhrFields:{withCredentials:!0},async:!0,crossDomain:!0,datatype:"json",contentType:"application/json;charset=UTF-8 ",success:function(s){t.msg=s.data}})},data:function(){return{msg:{},user:{}}},methods:{zhengze:function(){null==this.$(".tel").val().match(/^[1][3548][0-9]{9}$/)?this.$(".teljing").css({display:"block"}):this.$(".teljing").css({display:"none"})},emit:function(){var t=this;setTimeout(function(){j.$emit("user",t.user),j.$emit("msg",t.msg)},2)},submitinfo:function(){return!!confirm("确认修改资料？")},changepic:function(t){var s=new FileReader,e=this.$("#file")[0].files[0];s.readAsDataURL(e);var i=this;s.onload=function(t){i.$("#userface").attr("src",this.result)}},xiugai:function(){var t=this,s=this.$(".pwd").val(),e=this.$(".name").val(),i=this.$(".tel").val();console.log(s,e,i),t.$.ajax({url:"http://129.28.101.21:5000/api/user/modifyPersonInfo",type:"POST",data:""==s?f()({new_nick_name:e,new_tel:i}):f()({new_password:s,new_nick_name:e,new_tel:i}),xhrFields:{withCredentials:!0},crossDomain:!0,datatype:"json",async:!0,contentType:"application/json;charset=UTF-8 ",success:function(s){console.log(s),console.log(t.msg),t.msg.nick_name=e,t.msg.tel=i,t.user.nick_name=e,alert("信息修改成功！")}})},picture:function(){var t=this,s=new FormData,e=document.getElementById("file").files[0];console.log(e),s.append("file",e),console.log(s),void 0!=e&&t.$.ajax({url:"http://129.28.101.21:5000/api/user/modifyPersonAvatar",type:"POST",data:s,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,cache:!1,processData:!1,contentType:!1,success:function(s){console.log(s),alert("上传完成"),console.log(t.user),t.user.avatarUrl=s.avatarUrl,console.log(t.user)}})}}},q={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"xiugai"}},[e("div",{staticClass:"x-title",on:{click:function(s){return t.emit()}}},[e("router-link",{attrs:{to:"/index"}},[e("img",{attrs:{src:"static/img/fanhui.png",alt:""}}),e("span",[t._v("首页")])])],1),t._v(" "),e("div",{staticClass:"x-block"},[e("div",{staticClass:"face-block"},[e("img",{attrs:{src:"http://"+this.user.avatarUrl,alt:"加载失败",id:"userface"}}),t._v(" "),e("input",{attrs:{type:"file",name:"touxiang",id:"file"},on:{change:function(s){return t.changepic()}}}),e("br"),t._v(" "),e("input",{attrs:{type:"submit",value:"确认修改"},on:{click:function(s){t.submitinfo(),t.xiugai(),t.picture()}}})]),t._v(" "),e("ul",[t._m(0),t._v(" "),e("li",[e("span",[t._v("昵称：")]),e("input",{staticClass:"name",attrs:{type:"text",name:"nicheng"},domProps:{value:this.msg.nick_name}})]),t._v(" "),e("li",[e("span",[t._v("电话：")]),e("input",{staticClass:"tel",attrs:{type:"text",name:"qitaxinxi"},domProps:{value:this.msg.tel},on:{change:function(s){return t.zhengze()}}})]),t._v(" "),e("span",{staticClass:"jinggao teljing"},[t._v("电话号码格式不对哦！")])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("span",[this._v("新密码：")]),s("input",{staticClass:"pwd",attrs:{type:"password",name:"pwd"}})])}]};var U=e("C7Lr")(L,q,!1,function(t){e("11TF")},"data-v-57ccc678",null).exports,P={name:"game",components:{loading:w},mounted:function(){this.$("#game").height(window.innerHeight);var t=this;j.$on("usermsg",function(s){t.user=s,console.log(t.user,s),t.$nextTick(function(){t.user=s})});var s=io.connect("http://129.28.101.21:5000/compete");this.socketObj=s,s.on("connect",function(s){s&&(console.log(s),t.connectStatus=s.connect,!0===t.connectStatus&&(console.log("连接服务器成功"),t.socketObj.emit("join",{match:!1,connect:!0,ready:!1,msg:"客户端请求匹配"},function(t){t&&console.log(t)})))}),t.socketObj.on("server_response",function(s){s&&(!0===s.connect&&!0===s.match&&!1===s.ready&&"playerInfo"===s.type&&(console.log("收到服务器返回的玩家信息"),console.log(s.data),t.pk_player.id=s.data.account,t.pk_player.nick_name=s.data.nick_name,t.pk_player.avatarUrl=s.data.avatar_url),!0===s.connect&&!0===s.match&&!0===s.ready&&"question"===s.type&&(console.log("收到服务器返回的第"+ ++t.questionIndex+"题目"),t.is_answer=!1,t.question=s.data,"预警与监测"===t.question.type&&t.predictNum++,"构造与特点"===t.question.type&&t.structureNum++,"防震与救援"===t.question.type&&t.rescueNum++,t.percent=100,null===t.timer&&(t.timer=setInterval(t.updateSeconds,1e3)),console.log(s.data)),"scoreInfo"===s.type&&(s.data.id===t.pk_player.id?(t.pk_player.currentQuestionScore=s.data.current_score,t.pk_player.score=t.pk_player.score+t.pk_player.currentQuestionScore):console.log("对方还未作答")),"finalResult"===s.type&&(clearInterval(t.timer),null!=s.winer?(t.winner=s.winer,t.$(".gameover").css({display:"block"}),console.log(s.winer)):(t.$(".gameover").css({display:"block"}),t.$(".gameover").html("平局"),console.log("平局"))))})},data:function(){return{msg:"Welcome to Your Vue.js App",visible:!1,user:{},question:{},winner:{},isSingleChoice:"单选",isShow:!0,timer:null,percent:100,second:"10",score:0,is_answer:!1,is_end:!1,currentQuestionIndex:0,currentQuestionScore:0,pk_player:{id:null,nick_name:null,avatarUrl:null,score:0,currentQuestionScore:0,currentQuestionIndex:0},single:!1,questionIndex:0,socketObj:null,tinum:0,pipei_success:!0,correctNum:0,rescueNum:0,rescueRightNum:0,rescueRate:0,structureNum:0,structureRightNum:0,structureRate:0,predictNum:0,predictRightNum:0,predictRate:0,contest_info:{},all_time:0}},methods:{emit:function(){var t=this;setTimeout(function(){j.$emit("user",t.user)},2),t.$(".gameover").css({display:"none"})},show:function(t){console.log("开始执行show函数"),0!=t&&(console.log(t),this.is_answer=!0,console.log("标准答案为"+this.question.result),t===this.question.result?("预警与监测"===this.question.type&&this.predictRightNum++,"构造与特点"===this.question.type&&this.structureRightNum++,"防震与救援"===this.question.type&&this.rescueRightNum++,this.currentQuestionScore=this.second,this.score=this.score+this.currentQuestionScore,this.$Modal.success({title:"恭喜你,选对了",content:"不错哟^.^"})):this.$Modal.error({title:"有点遗憾，选错了",content:"正确答案:  "+this.question.result})),0===t&&(this.is_answer=!1,console.log("该题未作答"),this.currentQuestionScore=0),this.currentQuestionIndex++,10===this.currentQuestionIndex&&(this.is_end=!0,0!=this.predictNum&&(this.predictRate=this.predictRightNum/this.predictNum),0!=this.structureNum&&(this.structureRate=this.structureRightNum/this.structureNum),0!=this.rescueNum&&(this.rescueRate=this.rescueRightNum/this.rescueNum),this.contest_info={predictRate:this.predictRate,rescueRate:this.rescueRate,structureRate:this.structureRate,correct_num:this.correctNum}),this.socketObj.emit("scoreInfo",{is_answer:this.is_answer,is_end:this.is_end,currentQuestionIndex:this.currentQuestionIndex,current_score:this.currentQuestionScore,contest_info:this.contest_info,msg:"提交成绩"},function(t){t&&console.log(t)})},updateSeconds:function(){if(0===this.percent)return console.log("倒计时为0"),this.show(0),!1;this.percent-=10,this.second=this.percent/10},reLoad:function(){this.isShow=!1},getQuestionInfo:function(){this.questionIndex<10&&this.socketObj.emit("")},commitAnswerResult:function(){this.socketObj.emit("")}},computed:{color:function(){var t="#2db7f5";return 0==this.percent&&(t="#5cb85c"),t}}},H={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"game"}},[e("div",{staticClass:"gameover"},[e("span",[t._v(t._s(this.winner.nick_name+"     win"))]),e("span",{staticClass:"back-button",on:{click:function(s){return t.emit()}}},[e("router-link",{attrs:{to:"/index"}},[t._v("返回首页")])],1)]),t._v(" "),e("div",{staticClass:"g-title",on:{click:function(s){return t.emit()}}},[e("div",[e("router-link",{attrs:{to:"/index"}},[e("img",{attrs:{src:"static/img/fanhui.png",alt:""}}),e("span",[t._v("首页")])])],1)]),t._v(" "),e("div",{staticClass:"g-block"},[e("div",{staticClass:"left-game"},[e("img",{attrs:{src:"http://"+this.user.avatarUrl,alt:""}}),t._v(" "),e("span",{staticStyle:{"padding-left":"25px"}},[t._v(t._s(this.user.nick_name))]),t._v(" "),e("span",{staticStyle:{"padding-left":"30px"}},[t._v(t._s(t.score))]),t._v(" "),e("i-progress",{staticClass:"left-process",attrs:{"stroke-color":["#108ee9","#87d068"],percent:t.score,"stroke-width":20,"text-inside":""}})],1),t._v(" "),e("div",{staticClass:"middle-game"},[e("div",{staticClass:"daojishi"},[e("i-circle",{attrs:{percent:t.percent,"stroke-color":t.color}},[0==t.percent?e("Icon",{staticStyle:{color:"#5cb85c"},attrs:{type:"ios-checkmark",size:"60"}}):e("span",{staticStyle:{"font-size":"24px"}},[t._v(t._s(t.second)+"s")])],1)],1),t._v(" "),e("div",{staticClass:"timu"},[e("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.question.title))])]),t._v(" "),t._l(t.question.choice,function(s,i){return e("ButtonGroup",{key:i,staticClass:"xuanxiang-block",attrs:{vertical:""}},[e("i-button",{staticClass:"xuanxiang",attrs:{long:"",size:"large"},on:{click:function(e){return t.show(s.choice_name)}}},[t._v(t._s(s.choice_name+"    "+s.content))])],1)})],2),t._v(" "),e("div",{staticClass:"right-game"},[e("div",[e("img",{attrs:{src:"http://"+this.pk_player.avatarUrl,alt:""}})]),t._v(" "),e("span",{staticStyle:{"padding-right":"25px"}},[t._v(t._s(t.pk_player.nick_name))]),t._v(" "),e("span",{staticStyle:{"padding-right":"30px"}},[t._v(t._s(t.pk_player.score))]),t._v(" "),e("i-progress",{staticClass:"right-process",attrs:{"stroke-color":["#108ee9","#87d068"],percent:this.pk_player.score,"stroke-width":20,"text-inside":""}})],1)])])},staticRenderFns:[]};var Q=e("C7Lr")(P,H,!1,function(t){e("YwsN")},"data-v-47466d37",null).exports,O={name:"denglu",data:function(){return{msg:"Welcome to Your Vue.js App"}},methods:{Get_Login:function(){var t=document.getElementById("account").value,s=document.getElementById("password").value,e=this,i="http://129.28.101.21:5000/api/login?account="+t+"&password="+s;0===t.length?alert("用户名不能为空！"):0===s.length?alert("密码不能为空！"):0!==t.length&&0!==s.length&&$.ajax({url:i,type:"GET",xhrFields:{withCredentials:!0},dataType:"json",success:function(t){t.status&&(console.log(t,t.user),setTimeout(function(){j.$emit("user",t.user)},2),t.is_login?e.$router.push({path:"/index"}):("Account not exist"===t.msg&&(alert("此用户不存在"),document.getElementById("account").value="",document.getElementById("password").value=""),"Password error"===t.msg&&(alert("密码错误，请重新输入"),document.getElementById("password").value="")))},error:function(){console.log("请求失败！")}})},findPassword:function(){var t=document.getElementById("f_account").value,s=document.getElementById("nick_name").value,e=document.getElementById("tel").value;console.log(t,s,e);var i="http://129.28.101.21:5000/api/forgetPassword?account="+t+"&nick_name="+s+"&tel="+e;this.$.ajax({url:i,type:"GET",dataType:"json",xhrfields:{withCredentials:!0},success:function(t){console.log(t,t.status),t.status?"get password  success"===t.msg?alert("您的密码是"+t.password):"info error"===t.msg&&alert("输入信息有误！"):alert("输入信息有误！")},error:function(){console.log("请求失败！")}})}}},A={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"denglu"}},[e("div",{staticClass:"login"},[e("div",{staticClass:"container-login100"},[e("div",{staticClass:"wrap-login100"},[t._m(0),t._v(" "),e("form",{staticClass:"login100-form validate-form"},[e("span",{staticClass:"login100-form-title"}),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("div",{staticClass:"container-login100-form-btn"},[e("button",{staticClass:"login100-form-btn",attrs:{type:"button",id:"btn_login"},on:{click:function(s){return t.Get_Login()}}},[t._v("\n\t\t\t\t\t\t登录\n\t\t\t\t\t")])]),t._v(" "),e("div",{staticClass:"p-t-12"},[t._m(4),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"myModal",tabindex:"-1",role:"dialog","aria-labelledby":"myModalLabel"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content",staticStyle:{"background-image":"linear-gradient(to top, #f3e7e9 0%, #e3eeff 99%, #e3eeff 100%)"}},[t._m(5),t._v(" "),e("div",{staticClass:"modal-body"},[e("form",{staticClass:"form-horizontal"},[t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),e("div",{staticClass:"form-group",staticStyle:{"padding-top":"40px","margin-left":"30%"}},[e("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(s){return t.findPassword()}}},[t._v("确认")])])])]),t._v(" "),t._m(9)])])])]),t._v(" "),e("div",{staticClass:"text-center p-t-136"},[e("router-link",{staticClass:"txt2",attrs:{to:"/login"}},[t._v("\n\t\t\t\t\t\t\t还没有账号？立即注册\n\t\t\t\t\t\t"),e("i",{staticClass:"fa fa-long-arrow-right m-l-5",attrs:{"aria-hidden":"true"}})])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"login100-pic js-tilt",attrs:{"data-tilt":""}},[s("img",{attrs:{src:"static/img/img-01.png",alt:""}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"wrap-input100 validate-input"},[s("input",{staticClass:"input100",attrs:{type:"text",id:"account",name:"account",placeholder:"账号"}}),this._v(" "),s("span",{staticClass:"focus-input100"}),this._v(" "),s("span",{staticClass:"symbol-input100"},[s("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"wrap-input100 validate-input"},[s("input",{staticClass:"input100",attrs:{type:"password",id:"password",name:"password",placeholder:"密码"}}),this._v(" "),s("span",{staticClass:"focus-input100"}),this._v(" "),s("span",{staticClass:"symbol-input100"},[s("i",{staticClass:"fa fa-lock",attrs:{"aria-hidden":"true"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticStyle:{color:"darkgrey"}},[s("input",{attrs:{type:"checkbox",id:"remember_pw"}}),this._v("Remember me\n\t\t\t\t")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"text-center"},[s("button",{staticClass:"txt2 btn",attrs:{type:"button","data-toggle":"modal","data-target":"#myModal"}},[this._v("\n\t\t\t\t\t\t\t忘记密码？\n\t\t\t\t\t\t")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),s("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[this._v("Finding Password")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-sm-2 control-label"},[this._v("账号")]),this._v(" "),s("div",{staticClass:"col-sm-10",staticStyle:{width:"50%"}},[s("input",{staticClass:"form-control",attrs:{type:"text",id:"f_account",placeholder:"account"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"form-group",staticStyle:{"padding-top":"40px"}},[s("label",{staticClass:"col-sm-2 control-label"},[this._v("昵称")]),this._v(" "),s("div",{staticClass:"col-sm-10",staticStyle:{width:"50%"}},[s("input",{staticClass:"form-control",attrs:{type:"text",id:"nick_name",placeholder:"nick_name"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"form-group",staticStyle:{"padding-top":"40px"}},[s("label",{staticClass:"col-sm-2 control-label"},[this._v("电话")]),this._v(" "),s("div",{staticClass:"col-sm-10",staticStyle:{width:"50%"}},[s("input",{staticClass:"form-control",attrs:{type:"text",id:"tel",placeholder:"telephone"}})])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[this._v("Close")])])}]};var D=e("C7Lr")(O,A,!1,function(t){e("5mPX")},"data-v-c5a1f0e2",null).exports,G=new h.a({mode:"hash",routes:[{path:"/",name:D,component:D},{path:"/index",name:T,component:T},{path:"/geren",name:I,component:I},{path:"/echar",component:B},{path:"/xiugai",name:U,component:U},{path:"/game",name:Q,component:Q},{path:"/login",name:b,component:b}]});i.default.use(h.a);var M=G;i.default.use(p.a),i.default.use(m.a),i.default.config.productionTip=!1,i.default.prototype.$=r.a,i.default.prototype.$echarts=l.a,new i.default({el:"#app",router:M,components:{App:a},template:"<App/>"})},R5dQ:function(t,s){},"ULO+":function(t,s){},Xm6B:function(t,s){},YwsN:function(t,s){},yUHH:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.6c604b228c6ca40f718d.js.map